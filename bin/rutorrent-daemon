#!/usr/bin/env bash
set -Eeuo pipefail

root=$(dirname "$(dirname "$(realpath "${BASH_SOURCE[0]}")")")
PATH="$root/bin:$PATH"
uid=$(user-uid)
gid=$(user-gid)

exec docker run \
    --detach \
    --entrypoint /config/entrypoint.sh \
    --env PUID="$uid" \
    --env PGID="$gid" \
    --name=rutorrent \
    --publish 8000:80 \
    --rm \
    --volume "$root/music/.unsorted:/music/.unsorted" \
    --volume "$root/torrents/config:/config" \
    --volume "$root/torrents/data:/downloads" \
    --volume "$root/video/movies:/downloads/completed/movies" \
    --volume "$root/video/series:/downloads/completed/series" \
    linuxserver/rutorrent
